@startuml
!theme vibrant
title Fluxo da Metodologia de Pesquisa
start

partition "Fase 1: Coleta e Filtragem de Dados" {
    :Identificação do dataset
    (GitHub GraphQL API, período 2018-2025);

    :Coleta: Repositórios, stars, commits;
    note right: **Ferramenta:** Scripts Python \n(PyGitHub / GraphQL).

    :Detecção de gaps: Sem commits >= 180 dias;

    if (Gap encontrado?) then (Sim)
        :Extração do repositório e do período de morte
        (data_morte, data_revive);

        :Cálculo de métricas pré vs pós:
        - Commits, Devs, Issues/PRs, Intervalo médio;
        note right: **Ferramenta:** Python (Pandas) \npara processamento de dados.

        :Verificação de critérios de ressurreição;

        if (Repositório ressuscitado?) then (Sim)
            :Dataset Ressuscitados
            (JSON / XLSX);
        else (Não)
            :Dataset Mortos
            (JSON / XLSX);
        endif

    else (Não)
        :Sem morte -> Repositório Ignorado;
        stop
    endif
}

partition "Fase 2: Extração de Métricas (GQM)" {
    split
        #LightBlue:
        **Pilar 1: Engajamento (Question 1)**
        
        - **M1.1: Frequência e atualização de**
          **arquivos de engajamento:**
          (README, CONTRIBUTING, CODE_OF_CONDUCT)
        - **M1.2: Interações comunitárias:**
          (discussions, stars, forks, comentários)
        - **M1.3: Diversidade e recorrência**
          **de contribuidores:**
          (novos e retornantes após revivência);
          
    split again
        #LightGreen:
        **Pilar 2: Atividades (Question 2)**
        
        - **M2.1: Qualidade dos Pull Requests:**
          (tamanho, tempo de revisão,
          aceitação, descrição)
        - **M2.2: Clareza e completude das Issues:**
          (labels, descrição, tempo de fechamento)
        - **M2.3: Aderência a convenções de commits:**
          (uso de conventional commits,
          mensagens estruturadas);

    split again
        #LightSalmon:
        **Pilar 3: Qualidade do Código (Question 3)**
        
        - **M3.1: Métricas de análise estática de código:**
          (complexidade, duplicação, code smells)
        - **M3.2: Cobertura de testes:**
          (percentual e evolução
          antes/depois da revivência)
        - **M3.3: Índice de maintainability /**
          **qualidade Sonar:**
          (pontuação agregada de
          qualidade e segurança);
       note right: **Ferramenta:** SonarQube (versão 9.9 LTS) \npara análise das métricas
          
    endsplit

    :Consolidação das Métricas em Dataset Unificado:
Estruturação de todas as variáveis de Engajamento, Atividades
e Qualidade em uma única tabela para a próxima fase de análise;

    :Análise estatística e ML:
    - Correlação, Regressão, Clustering;
    note right: **Ferramentas:** Python \n(scikit-learn, statsmodels).
}

partition "Fase 3: Resultados e Conclusões" {
    :**Objetivo Final (Goal):**
    Compreender fatores técnicos e sociais
    que contribuem para a revivência e
    manutenção de repositórios OSS;
}

stop
@enduml
